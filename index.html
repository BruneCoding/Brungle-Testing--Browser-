<script src="https://kit.fontawesome.com/cd9d6500a7.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="styles.css">
<h1 id="brungle-text">Brungle </h1>
<h5 style="position: absolute; top: 36.65%; z-index: -1; opacity: 0.85; font-size: 12.5px;">
  Made with <b style="font-size: 13.5px;">‚ù§Ô∏è</b>
  by Shyun
</h5>
<div class="searchBar">
  <div class="inputHold">
    <!-- search icon -->
    <i class="fa-solid fa-magnifying-glass"></i>
    <!-- input -->
    <form id="search-form">
      <input id="query" type="text" class="searchInput" placeholder="Search Brungle ... " autofocus></input>
    </form>
  </div>
  <!--  file icon  -->
  <i style="transform: rotate(-35deg); margin-right: 15px; margin-left: -35px;" class="fa-solid          fa-paperclip"></i>
  <hr>
  <!-- microphone icon -->
  <i style="margin-right: 15px; margin-left: -27px; cursor: pointer;" class="fa-solid fa-microphone"></i>
</div>
<!-- image preview -->
<div id="imagePreviewContainer" style="display: none; margin-top: 10px; text-align: center;top: 15px; left: 15px;">
  <img id="uploadedImagePreview" style="max-width: 200px; max-height: 150px; border-radius: 8px;" />
  <button id="removeImageBtn" style="margin-left: 10px; background: rgb(178, 121, 255); color: #eaeaea;font-family: Helvetica, cursive; border: none; border-radius: 4px; padding: 2px 8px; cursor: pointer; transition: all 0.3s ease-in-out; font-weight: bold;">‚úï</button>
</div>
<!-- waves -->
<svg style="position:absolute; z-index: -1; bottom: -37vh; right: 0;" width="50%" height="100%" id="svg" viewBox="0 0 1440 490" xmlns="http://www.w3.org/2000/svg" class="transition duration-300 ease-in-out delay-150">
  <path d="M 0,500 L 0,75 C 37.48546059933406,64.24947589098532 74.97092119866812,53.49895178197065 134,48 C 193.02907880133188,42.50104821802935 273.60177580466154,42.25366876310273 326,44 C 378.39822419533846,45.74633123689727 402.6219755826859,49.486373165618446 460,62 C 517.3780244173141,74.51362683438155 607.9103218645948,95.80083857442348 661,96 C 714.0896781354052,96.19916142557652 729.7367369589346,75.31027253668762 782,65 C 834.2632630410654,54.68972746331237 923.1427302996672,54.958071278826 980,52 C 1036.8572697003328,49.041928721174 1061.6923418423971,42.857442348008384 1105,48 C 1148.3076581576029,53.142557651991616 1210.0879023307439,69.61215932914045 1269,76 C 1327.9120976692561,82.38784067085955 1383.956048834628,78.69392033542977 1440,75 L 1440,500 L 0,500 Z" stroke="none" stroke-width="0" fill="#3e404d" fill-opacity="0.265" class="transition-all duration-300 ease-in-out delay-150 path-0"></path>
  <path d="M 0,500 L 0,175 C 51.92373905537056,197.1543470218276 103.84747811074112,219.30869404365518 150,205 C 196.15252188925888,190.69130595634482 236.53382661240602,139.91957084720678 295,140 C 353.466173387594,140.08042915279322 430.0172154396349,191.01302256751757 491,207 C 551.9827845603651,222.98697743248243 597.3973116290541,204.02833888272292 641,201 C 684.6026883709459,197.97166111727708 726.3935380441484,210.87362190159084 777,204 C 827.6064619558516,197.12637809840916 887.0285361943519,170.47717351091381 954,168 C 1020.9714638056481,165.52282648908619 1095.4923171784437,187.21768405475396 1148,184 C 1200.5076828215563,180.78231594524604 1231.0021950918733,152.65209027007032 1276,147 C 1320.9978049081267,141.34790972992968 1380.4989024540632,158.17395486496486 1440,175 L 1440,500 L 0,500 Z" stroke="none" stroke-width="0" fill="#3e404d" fill-opacity="0.4" class="transition-all duration-300 ease-in-out delay-150 path-1"></path>
  <path d="M 0,500 L 0,275 C 55.14825502528056,284.11436675299046 110.29651005056112,293.228733505981 171,286 C 231.70348994943888,278.771266494019 297.9622148230361,255.1994327290665 346,243 C 394.0377851769639,230.8005672709335 423.85463065729436,229.9735355777531 473,238 C 522.1453693427056,246.0264644222469 590.6192625477864,262.9064249599211 656,262 C 721.3807374522136,261.0935750400789 783.6683191515599,242.4007645825626 824,242 C 864.3316808484401,241.5992354174374 882.7074608459737,259.4905167098286 939,274 C 995.2925391540263,288.5094832901714 1089.5018374645456,299.63716857812307 1148,294 C 1206.4981625354544,288.36283142187693 1229.2851892958442,265.9608089776791 1272,260 C 1314.7148107041558,254.03919102232086 1377.3574053520779,264.51959551116045 1440,275 L 1440,500 L 0,500 Z" stroke="none" stroke-width="0" fill="#3e404d" fill-opacity="0.53" class="transition-all duration-300 ease-in-out delay-150 path-2"></path>
  <path d="M 0,500 L 0,375 C 42.506942902947344,362.3859168824763 85.01388580589469,349.77183376495253 138,349 C 190.9861141941053,348.22816623504747 254.4513996793686,359.2985818226662 312,370 C 369.5486003206314,380.7014181773338 421.18051547663094,391.03383894438275 481,380 C 540.819484523369,368.96616105561725 608.8265384141079,336.5660623998027 666,344 C 723.1734615858921,351.4339376001973 769.5133308669378,398.70191145640644 822,400 C 874.4866691330622,401.29808854359356 933.1201381181404,356.6262917745714 983,343 C 1032.8798618818596,329.3737082254286 1074.0061166605005,346.7929214453077 1121,367 C 1167.9938833394995,387.2070785546923 1220.8553952398568,410.2020224441978 1275,412 C 1329.1446047601432,413.7979775558022 1384.5723023800715,394.3989887779011 1440,375 L 1440,500 L 0,500 Z" stroke="none" stroke-width="0" fill="#3e404d" fill-opacity="1" class="transition-all duration-300 ease-in-out delay-150 path-3"></path>
</svg>
<svg style="position:absolute; z-index: -1; bottom: -37vh; left: 0;" width="50%" height="100%" id="svg" viewBox="0 0 1440 490" xmlns="http://www.w3.org/2000/svg" class="transition duration-300 ease-in-out delay-150">
  <path d="M 0,500 L 0,75 C 37.48546059933406,64.24947589098532 74.97092119866812,53.49895178197065 134,48 C 193.02907880133188,42.50104821802935 273.60177580466154,42.25366876310273 326,44 C 378.39822419533846,45.74633123689727 402.6219755826859,49.486373165618446 460,62 C 517.3780244173141,74.51362683438155 607.9103218645948,95.80083857442348 661,96 C 714.0896781354052,96.19916142557652 729.7367369589346,75.31027253668762 782,65 C 834.2632630410654,54.68972746331237 923.1427302996672,54.958071278826 980,52 C 1036.8572697003328,49.041928721174 1061.6923418423971,42.857442348008384 1105,48 C 1148.3076581576029,53.142557651991616 1210.0879023307439,69.61215932914045 1269,76 C 1327.9120976692561,82.38784067085955 1383.956048834628,78.69392033542977 1440,75 L 1440,500 L 0,500 Z" stroke="none" stroke-width="0" fill="#3e404d" fill-opacity="0.265" class="transition-all duration-300 ease-in-out delay-150 path-0"></path>
  <path d="M 0,500 L 0,175 C 51.92373905537056,197.1543470218276 103.84747811074112,219.30869404365518 150,205 C 196.15252188925888,190.69130595634482 236.53382661240602,139.91957084720678 295,140 C 353.466173387594,140.08042915279322 430.0172154396349,191.01302256751757 491,207 C 551.9827845603651,222.98697743248243 597.3973116290541,204.02833888272292 641,201 C 684.6026883709459,197.97166111727708 726.3935380441484,210.87362190159084 777,204 C 827.6064619558516,197.12637809840916 887.0285361943519,170.47717351091381 954,168 C 1020.9714638056481,165.52282648908619 1095.4923171784437,187.21768405475396 1148,184 C 1200.5076828215563,180.78231594524604 1231.0021950918733,152.65209027007032 1276,147 C 1320.9978049081267,141.34790972992968 1380.4989024540632,158.17395486496486 1440,175 L 1440,500 L 0,500 Z" stroke="none" stroke-width="0" fill="#3e404d" fill-opacity="0.4" class="transition-all duration-300 ease-in-out delay-150 path-1"></path>
  <path d="M 0,500 L 0,275 C 55.14825502528056,284.11436675299046 110.29651005056112,293.228733505981 171,286 C 231.70348994943888,278.771266494019 297.9622148230361,255.1994327290665 346,243 C 394.0377851769639,230.8005672709335 423.85463065729436,229.9735355777531 473,238 C 522.1453693427056,246.0264644222469 590.6192625477864,262.9064249599211 656,262 C 721.3807374522136,261.0935750400789 783.6683191515599,242.4007645825626 824,242 C 864.3316808484401,241.5992354174374 882.7074608459737,259.4905167098286 939,274 C 995.2925391540263,288.5094832901714 1089.5018374645456,299.63716857812307 1148,294 C 1206.4981625354544,288.36283142187693 1229.2851892958442,265.9608089776791 1272,260 C 1314.7148107041558,254.03919102232086 1377.3574053520779,264.51959551116045 1440,275 L 1440,500 L 0,500 Z" stroke="none" stroke-width="0" fill="#3e404d" fill-opacity="0.53" class="transition-all duration-300 ease-in-out delay-150 path-2"></path>
  <path d="M 0,500 L 0,375 C 42.506942902947344,362.3859168824763 85.01388580589469,349.77183376495253 138,349 C 190.9861141941053,348.22816623504747 254.4513996793686,359.2985818226662 312,370 C 369.5486003206314,380.7014181773338 421.18051547663094,391.03383894438275 481,380 C 540.819484523369,368.96616105561725 608.8265384141079,336.5660623998027 666,344 C 723.1734615858921,351.4339376001973 769.5133308669378,398.70191145640644 822,400 C 874.4866691330622,401.29808854359356 933.1201381181404,356.6262917745714 983,343 C 1032.8798618818596,329.3737082254286 1074.0061166605005,346.7929214453077 1121,367 C 1167.9938833394995,387.2070785546923 1220.8553952398568,410.2020224441978 1275,412 C 1329.1446047601432,413.7979775558022 1384.5723023800715,394.3989887779011 1440,375 L 1440,500 L 0,500 Z" stroke="none" stroke-width="0" fill="#3e404d" fill-opacity="1" class="transition-all duration-300 ease-in-out delay-150 path-3"></path>
</svg>
<h1 style="position: absolute; bottom: 10px; right: 10px; text-align: right; padding: 5px; opacity: 0.85; font-size: 10px;">Brungle Search</h1>
<div class="circle-container" onclick="rotateCircle()">
  <div class="circle-side front-side">
    <div class="circle front">
      <h1></h1>
    </div>
  </div>
  <div class="circle-side back-side">
    <div class="circle back">
      <h1></h1>
    </div>
  </div>
</div>
<script src="script.js"></script>

<!-- Chat Systems -->
<div class="chat-button" style="visibility: visible; opacity: 0.65; display: flex; align-items: center; justify-content: center; color: #eaeaea;"><i class="fa-solid fa-message"></i></div>
<div class="chat-menu" style="visibility: hidden; margin-left: -365px;">
  <!-- Header -->
  <div class="chat-header">
    <h2>NodeChat<span id="thisisaplaceholder">+</span></h2>
    <button class="close-btn">‚úï</button>
  </div>

  <!-- Messages -->
  <div class="messages" id="messages-container">

  </div>

  <!-- Typing Indicator -->
  <div class="typing-indicator" id="typing-indicator">
    <span class="typing-dot"></span>
    <span class="typing-dot"></span>
    <span class="typing-dot"></span>
  </div>

  <!-- Input -->
  <div class="chat-input">
    <input type="text" id="message-input" placeholder="Type a message...">
    <button class="send-button" id="send-button">Send</button>
  </div>
</div>

<!--DOM configuration script  -->
<script>
  document.addEventListener('DOMContentLoaded', function() {

  
console.log(
  "%cBeta Version. [v1.1.5] ... Post Roll 4", 
  "color: #FF5733; font-size: 16px; font-weight: bold;"
);

console.log(
  "%cUpdated Features:", 
  "color: #3498DB; font-size: 14px; font-weight: bold;"
);

console.log(
  "%c==> DOM configuration to fix Search Engine toggle", 
  "color: #2ECC71; font-size: 13px;"
);
  

const searchBar = document.querySelector(".searchBar");
const paperClip = document.querySelector(".fa-paperclip");
let uploadedImage = null;

document.querySelector(".fa-microphone").addEventListener("click", function () {
  const searchInput = document.getElementById("query");
  const microPhone = document.querySelector(".fa-microphone");

  if ("webkitSpeechRecognition" in window) {
    const recognition = new webkitSpeechRecognition();
    recognition.continuous = false;
    recognition.interimResults = false;

    recognition.onstart = function () {
      searchInput.placeholder = "Listening...";
      microPhone.style.color = "rgb(178,121,255)";
      microPhone.style.scale = "1.2";
      searchBar.classList.add("searchBar-active");
    };

    recognition.onresult = function (event) {
      const transcript = event.results[0][0].transcript;
      searchInput.value = transcript;
      searchInput.placeholder = "Search Brungle...";
      microPhone.style.color = "#eaeaea";
      microPhone.style.scale = "1";
      searchBar.classList.remove("searchBar-active");
    };

    recognition.onerror = function (event) {
      searchInput.placeholder = "Error: " + event.error;
      setTimeout(() => {
        searchInput.placeholder = "Search Brungle...";
      }, 3000);
      searchBar.classList.remove("searchBar-active");
    };

    recognition.onend = function () {
      searchInput.placeholder = "Search Brungle...";
      searchBar.classList.remove("searchBar-active");
    };

    recognition.start();
  } else {
    searchInput.placeholder = "Voice search not supported";
    setTimeout(() => {
      searchInput.placeholder = "Search Brungle...";
    }, 3000);
  }
});

paperClip.addEventListener("click", function () {
  if (!isFrontVisible) {
    const fileInput = document.createElement("input");
    fileInput.type = "file";
    fileInput.accept = "image/*";
    fileInput.multiple = false;

    fileInput.onchange = (e) => {
      const file = e.target.files[0];
      if (file) {
        uploadedImage = file;
        showImagePreview(file);
      }
    };
    fileInput.click();
  } else {
    alert("Image search only available in Google mode");
  }
});

document.getElementById("removeImageBtn")?.addEventListener("click", () => {
  uploadedImage = null;
  document.getElementById("imagePreviewContainer").style.display = "none";
});

function showImagePreview(file) {
  const previewContainer = document.getElementById("imagePreviewContainer");
  const previewImg = document.getElementById("uploadedImagePreview");

  const reader = new FileReader();
  reader.onload = (e) => {
    previewImg.src = e.target.result;
    previewContainer.style.display = "block";
  };
  reader.readAsDataURL(file);
}

document.getElementById("query").addEventListener("keydown", function (e) {
  if (e.key === "Enter") {
    e.preventDefault();
    const query = this.value.trim();

    if (isFrontVisible) {
      if (query)
        window.location.href = `https://testing-bruh-brungle.pages.dev/#${encodeURIComponent(
          query
        )}`;
    } else {
      if (uploadedImage) {
        handleImageSearch(query);
      } else if (query) {
        window.location.href = `https://www.google.com/search?q=${encodeURIComponent(
          query
        )}`;
      }
    }
  }
});

function handleImageSearch(textQuery = "") {
  if (!uploadedImage) return;

  const form = document.createElement("form");
  form.method = "POST";
  form.action = "https://lens.google.com/upload";
  form.enctype = "multipart/form-data";
  form.target = "_blank";
  form.style.display = "none";

  const epInput = document.createElement("input");
  epInput.type = "hidden";
  epInput.name = "ep";
  epInput.value = "ccm";
  form.appendChild(epInput);

  if (textQuery) {
    const stInput = document.createElement("input");
    stInput.type = "hidden";
    stInput.name = "st";
    stInput.value = textQuery;
    form.appendChild(stInput);
  }

  const fileInput = document.createElement("input");
  fileInput.type = "file";
  fileInput.name = "encoded_image";

  const dataTransfer = new DataTransfer();
  dataTransfer.items.add(uploadedImage);
  fileInput.files = dataTransfer.files;
  form.appendChild(fileInput);

  document.body.appendChild(form);
  form.submit();

  setTimeout(() => {
    document.body.removeChild(form);
    document.getElementById("imagePreviewContainer").style.display = "none";
    uploadedImage = null;
  }, 1000);
}

let rotation = 0;
let isFrontVisible = true;
let db;
const request = indexedDB.open("ToggleDB", 1);

request.onupgradeneeded = function (e) {
  db = e.target.result;
  db.createObjectStore("state", { keyPath: "id" });
};

request.onsuccess = function (e) {
  db = e.target.result;
  loadState();
};

function saveState() {
  const tx = db.transaction("state", "readwrite");
  const store = tx.objectStore("state");
  store.put({ id: 1, isFrontVisible, rotation });
}

function loadState() {
  const tx = db.transaction("state", "readonly");
  const store = tx.objectStore("state");
  const getReq = store.get(1);
  getReq.onsuccess = () => {
    if (getReq.result) {
      isFrontVisible = getReq.result.isFrontVisible;
      rotation = getReq.result.rotation;
      document.querySelector(
        ".circle-container"
      ).style.transform = `rotateY(${rotation}deg)`;
    }
  };
}



function createSparkles() {
  const container = document.querySelector(".circle-container");
  for (let i = 0; i < 10; i++) {
    const sparkle = document.createElement("div");
    sparkle.classList.add("sparkle");
    sparkle.style.left = `${Math.random() * 120}px`;
    sparkle.style.top = `${Math.random() * 120}px`;
    container.appendChild(sparkle);
    setTimeout(() => sparkle.remove(), 800);
  }
}

const pressedKeys = new Set();

document.addEventListener("keydown", (e) => {
  pressedKeys.add(e.key.toUpperCase());
  if (
    pressedKeys.has("e") &&
    pressedKeys.has("F") &&
    pressedKeys.has("G") &&
    pressedKeys.has("H")
  ) {
    deleteState();
    console.log("State reset");
  }
});

document.addEventListener("keyup", (e) => {
  pressedKeys.delete(e.key.toUpperCase());
});

function deleteState() {
  const tx = db.transaction("state", "readwrite");
  const store = tx.objectStore("state");
  store.delete(1);
}

// messages for NodeChat
const chatMenu = document.querySelector(".chat-menu");
const chatButton = document.querySelector(".chat-button");
const messagesContainer = document.getElementById("messages-container");
const messageInput = document.getElementById("message-input");
const sendButton = document.getElementById("send-button");
const typingIndicator = document.getElementById("typing-indicator");
const closeBtn = document.querySelector(".close-btn");

const API_ENDPOINT =
  "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=AIzaSyCabBCysAE2M7-0DdmXa62VMfE61Js6714";

let chatHistory = JSON.parse(localStorage.getItem("nodeChatHistory")) || [];

function initChat() {
  messagesContainer.innerHTML = "";

  if (chatHistory.length === 0) {
    const initialMessage = {
      role: "bot",
      content: "Hello! How can I help you today?"
    };
    chatHistory.push(initialMessage);
    saveChatHistory();
  }

  chatHistory.forEach((message) => {
    displayMessage(message.role, message.content);
  });

  setTimeout(() => {
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
  }, 100);
}

function displayMessage(role, content) {
  const messageDiv = document.createElement("div");
  messageDiv.className = `message ${role === "user" ? "user-message" : ""}`;

  if (role === "bot") {
    messageDiv.innerHTML = formatAISummary(content);
  } else {
    messageDiv.textContent = content;
  }

  messagesContainer.appendChild(messageDiv);

  messagesContainer.scrollTop = messagesContainer.scrollHeight;
}

function formatAISummary(text) {
  return text
    .replace(/\*(.*?)\*/g, "<b>$1</b>")
    .replace(/_(.*?)_/g, "<u>$1</u>")
    .replace(/\^(.*?)\^/g, "<i>$1</i>")
    .replace(/\/new\//g, "<br><br>");
}

function saveChatHistory() {
  localStorage.setItem("nodeChatHistory", JSON.stringify(chatHistory));
}

  function deleteMemory() {

    localStorage.removeItem("nodeChatHistory");

    chatHistory = [{
        role: "bot",
        content: "Hello! How can I help you today?"
    }];

    initChat();
    
    console.log("NodeChat+ memory has been cleared.");
}

async function sendMessageToAI(message) {
  try {
    typingIndicator.style.display = "block";
    messagesContainer.scrollTop = messagesContainer.scrollHeight;

    const conversationHistory = chatHistory.map((msg) => ({
      role: msg.role === "user" ? "user" : "model",
      parts: [{ text: msg.content }]
    }));

    conversationHistory.push({
      role: "user",
      parts: [{ text: message }]
    });

    const prompt = {
      contents: [
        {
          role: "user",
          parts: [
            {
              text: `Your name is NodeChat+ and you are a ai assitant / chatbot. whenever you say you are a ai assistant, say i am [Brungle] NodeChat+ Answer this in a very friendly tone(doesnt need to be a quesiton)! You're an AI assistant / chatbot. 
              you do not need a question to answer. just talk basically and try answering their question if they have one. if not, engage friendly in a conversation :D
                                    Your job is to help the user in a slightly childish but still informative and helpful way. 
                                    Be like a fun mix of Grok X and a curious assistant. Keep it short, max 100 words.

Start by answering the query clearly in the first sentence, followed by a second short sentence. These two should be in the same paragraph. After that, write a new paragraph starting with /new/ (two line breaks).

Use ONLY these formatting markers:
- *word* ‚Üí bold
- _word_ ‚Üí underline
- ^word^ ‚Üí italic

‚ö†Ô∏è DO NOT use HTML tags like <b>, <u>, <br>, etc. 
‚ö†Ô∏è DO NOT use Markdown-style **double asterisks** for bold.

Only use *word* for important stats or keywords like *3.9 billion* ‚Äî never for full paragraphs.

If the query is a math problem, make the FIRST sentence fully bold using *...*.

still try to use bold but dont over do it!

Add fun emojis like ‚ú®, ü§Ø, ü•≥ where relevant, but don't overdo it.

dont say oops you dont have a question or smth. ignore it.

Also, if the user types in Clear Chat or anything similar to that, requesting chat history to be cleared, ignore the previous conversation.
Here's our conversation so far:`
            },
            ...conversationHistory.map((msg) => ({
              text: `${msg.role}: ${msg.parts[0].text}`
            }))
          ]
        }
      ]
    };

    const response = await fetch(API_ENDPOINT, {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(prompt)
    });

    if (!response.ok) {
      throw new Error(`API request failed with status ${response.status}`);
    }

    const data = await response.json();

    let aiResponse = data.candidates[0].content.parts[0].text;

    aiResponse = aiResponse.replace(/^model:\s*/i, "").trim();

    return aiResponse;
  } catch (error) {
    console.error("Error calling AI API:", error);
    return "Oops! Something went wrong. Please try again later. ü´†";
  } finally {
    typingIndicator.style.display = "none";
  }
}

async function handleSend() {
  const message = messageInput.value.trim();
  if (!message) return;

  displayMessage("user", message);
  chatHistory.push({
    role: "user",
    content: message
  });
  saveChatHistory();

  messageInput.value = "";

  const aiResponse = await sendMessageToAI(message);

  displayMessage("bot", aiResponse);
  chatHistory.push({
    role: "bot",
    content: aiResponse
  });
  saveChatHistory();
}

sendButton.addEventListener("click", handleSend);

messageInput.addEventListener("keypress", (e) => {
  if (e.key === "Enter") {
    handleSend();
  }
});

chatButton.addEventListener("click", () => {
  console.log("clicked 1")
  chatMenu.style.visibility = "visible";
  chatMenu.style.marginLeft = "20px";
  chatButton.style.visibility = "hidden";
  console.log("NodeChat+ has been opened.");
});

closeBtn.addEventListener("click", () => {
    console.log("clicked 2")
  chatButton.style.visibility = "visible";
  chatMenu.style.marginLeft = "-365px";
  console.log("NodeChat+ has been closed");
});

initChat();


  
  
});
  function rotateCircle() {
  rotation += 180;
  isFrontVisible = !isFrontVisible;
  document.querySelector(
    ".circle-container"
  ).style.transform = `rotateY(${rotation}deg)`;
  saveState();
  createSparkles();
}</script>
